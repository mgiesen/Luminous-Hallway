{
  "id": "lightning",
  "title": "⚡ Gewitter",
  "code": "function(frame, time) {\n  const width = frame.width;\n  const height = frame.height;\n  \n  // Pseudo-Zufallsfunktion\n  function pseudoRandom(seed) {\n    return Math.abs(Math.sin(seed * 12.9898) * 43758.5453) % 1;\n  }\n  \n  // Dunkle Wolken als Basis\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      const cloudNoise = Math.sin(x * 0.3 + time * 0.5) * Math.sin(y * 0.2 - time * 0.3);\n      const darkness = 15 + cloudNoise * 10;\n      \n      frame.setPixel(x, y, { \n        r: Math.floor(darkness), \n        g: Math.floor(darkness), \n        b: Math.floor(darkness + 5) \n      });\n    }\n  }\n  \n  // Blitz-Timing (zufällige Blitze alle paar Sekunden)\n  const lightningTime = Math.floor(time * 2);\n  const shouldFlash = pseudoRandom(lightningTime * 789) > 0.7;\n  \n  if (shouldFlash) {\n    // Blitz-Frame\n    const flashPhase = (time * 2) % 1;\n    \n    if (flashPhase < 0.1) {\n      // Kurzer heller Blitz\n      const flashIntensity = Math.sin(flashPhase * 10 * Math.PI);\n      const flashX = Math.floor(pseudoRandom(lightningTime * 123) * width);\n      \n      // Hauptblitz (vertikal)\n      for (let y = 0; y < height; y++) {\n        // Blitz-Breite variiert\n        const width_var = 1 + Math.floor(pseudoRandom(y * 456 + lightningTime) * 2);\n        \n        for (let dx = -width_var; dx <= width_var; dx++) {\n          const x = flashX + dx;\n          if (x >= 0 && x < width) {\n            const brightness = flashIntensity * (1 - Math.abs(dx) / width_var);\n            \n            frame.setPixel(x, y, {\n              r: Math.floor(200 + brightness * 55),\n              g: Math.floor(200 + brightness * 55),\n              b: Math.floor(255)\n            });\n          }\n        }\n      }\n      \n      // Aufhellen der gesamten Szene während des Blitzes\n      for (let y = 0; y < height; y++) {\n        for (let x = 0; x < width; x++) {\n          const current = frame.getPixel(x, y);\n          const boost = flashIntensity * 80;\n          \n          frame.setPixel(x, y, {\n            r: Math.min(255, current.r + boost),\n            g: Math.min(255, current.g + boost),\n            b: Math.min(255, current.b + boost)\n          });\n        }\n      }\n    }\n  }\n}"
}
